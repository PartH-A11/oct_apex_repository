pipeline {
    agent any
    
    parameters {
        string(name: 'FILE_PATH', defaultValue: 'sample.txt', description: 'Path to the file to modify')
        string(name: 'FIND_WORD', defaultValue: 'oldword', description: 'Word to find')
        string(name: 'REPLACE_WORD', defaultValue: 'newword', description: 'Word to replace with')
    }
    
    stages {
        stage('Check File') {
            steps {
                script {
                    if (!fileExists(params.FILE_PATH)) {
                        error "File ${params.FILE_PATH} does not exist!"
                    }
                }
            }
        }
        
        stage('Find and Replace') {
            steps {
                script {
                    def file = new File(params.FILE_PATH)
                    def content = file.text
                    def updatedContent = content.replaceAll(params.FIND_WORD, params.REPLACE_WORD)
                    file.text = updatedContent
                    echo "Replaced '${params.FIND_WORD}' with '${params.REPLACE_WORD}' in ${params.FILE_PATH}"
                }
            }
        }
        
        stage('Verify Changes') {
            steps {
                script {
                    def file = new File(params.FILE_PATH)
                    echo "Updated File Content:\n${file.text}"
                }
            }
        }
    }
}
